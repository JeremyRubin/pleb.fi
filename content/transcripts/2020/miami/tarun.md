---
date: "2021-06-09"
title: "tradfi v.s. defi: they won't or they can't?"
audio: /audio/events/2020/miami/tarun.mp3
slides: /slides/2020/miami/tarun.pdf
author: Tarun Chitra
---

## Tarun Chitra  {{< audioskip "0:00" >}}
Thanks, Jeremy, for the introduction. Yeah, so I think what I'm going to really cover is kind of like, what makes DeFi markets different than traditional finance markets and when you're developing what, what things you should be thinking of. But I think part of that is actually looking at what the overall market structure looks like, and why some of these markets are just significantly more efficient, or have created, you know, this huge amount of demand over the last 12 months. But, you know, I think it kind of helps to first define what the things are. So, I wrote most of the presentations, while in the cab on the way here, so I apologize. But I will post these, and I will talk through it. So, so, apologies. So, you know, I think the first thing is, you know, DEFI is now unfortunately, a buzzword that is as bad of a buzzword, as you know, Ico or proof of stake, where it actually means like 5 million things. And it's not, it's not very useful or meaningful term on its own. But there's sort of a set of criteria that I think, are kind of pretty important to defining what DeFi is. So at a very high level, I would say it's credibly neutral, open and fair mechanisms for facilitating trade and leverage in composable, and purely algorithmic marriage.

So let's break that down. There's a bunch of terms, a bunch of components to that. So neutral, no sort of single party can censor or block certain transactions or trades. Open, anyone can submit trades, you know, regardless of kind of who they are. And so in the case of something like lending, for instance, being able to do pseudonymous lending means that there's no sort of credit scoring system, there's no kind of knowing anything about the person doing everything other than their on chain behavior. Fair. And this is this is actually quite one of the hardest algorithmic things one runs into when designing the systems is, you want to ensure that participants can really only earn income in a pro rata manner. So if I put in a certain amount of resources, and that is maybe 20% of resources, I should never be able to get a lot more than 20% of stake or rewards or fees, or whatever it is in the system. And purely algorithmic, well, this is the code of law part. And I think in traditional finance, even though you know, to the end user, you might be like, hey, everything's algorithmic, I just went to Robin Hood, or interactive brokers or something, and I hit send, well, we learned in February, or hopefully most of the world wins every that's not really true. A lot of kind of the settlement portions of the world. You know, I think, during the kind of GameStop, hype, part one, we're, you know, kind of shown to be brittle. There is also sort of this idea that there's not irreversible settlement. And things kind of get very, very dicey. But one really important thing about being able to actually execute these things algorithmically is that you can separate the purely objective portions of a contract from the subjective one. So the subjective ones are like Oracle's right so if we look at say, in Bitcoin discrete log contracts, you still need some notion of an Oracle. But you encapsulate the one portion that is, takes objective external data from blockchain. And it everything else given that is execute algorithmically.

So these four things don't really exist in traditional finance. And so I think at a very high level, this is the these are kind of the key elements of DeFi. And so as we just saw in the in the past talk, you know, let's go through a couple examples. You know, we have uniswap and other constant function market makers or, you know, more generally automated market makers, but so far what we found in blockchain, like sort of constrained real compute environments, you end up having to do kind of these kind of somewhat inefficient mechanisms.

## Tarun Chitra  {{< audioskip "4:34" >}}
In if we compare uniswap to say, traditional finance. Well, in traditional finance, not everyone can actually be a liquidity provider. So being able to actually quote on a bunch of different markets like CME or NYSE or NASDAQ, you're not that requires a lot of like licensure and like, you know, you can't just say I have $100 I want to earn 100 divided by 1 billion times the number of fees generated today. But in automated market makers, you can, no matter what size you have, you'll get the pro rata share of the fees. And similarly, in traditional finance, not everyone can trade. So, you know, if you go to interactive brokers and then go, you know, say I'm going to buy some s&p futures, well, interactive brokers can go buy the s&p futures for you, and charge you an extra tax. But you yourself can't do that. And there's actually a fee that you are not really calculating that goes into that. versus an AMM, you're directly interacting with a primary market. And that's, that's something that, you know, I think a lot of normal finance does really doesn't have direct interaction from end users to the markets themselves. There's always sort of this cruft of brokers. On the other hand, we have Aave and compound. So you know, think of this as decentralized blockchain. And, you know, why is this different than blockfi for instance? Well, it's neutral, in the sense that manipulating the interest rates in the market would require you to have a significant share of the liquidity provided. So think, closer to 51%. It's open, there's no KYC, anyone can borrow and lend the withdrawal, you understand the withdrawal requirements, and you can withdraw whenever you want. It's fair. And this is actually I think, really one of the most beautiful things and that has come out of kind of define aetherium is, everyone pays the same interest rate. So there are very few markets in the world where every participant pays the same interest rate, there's always some type of disrupt price discrimination based on size, price discrimination based on, you know, characteristics of the person. But in the In defi, so far, we've effectively had these purely algorithmic mechanisms for determining interest rates. And everyone can see sort of what the interest rate calculation is, there's no voodoo magic cabal choosing the interest rate. And it's, you know, transparent, you can see the calculation. And I just wanted to draw for an example of what this looks like is, you know, the interest rate is a function of just purely supply and demand. So the utilization, which is sort of the ratio of the demand, so how much people want to borrow to the supply, which is the liquidity has some curve, that's fixed. And this curve is how these interest rates are calculated. But again, that's completely transparent to everyone, which, you know, blockfi is certainly not doing.

## Tarun Chitra  {{< audioskip "7:55" >}}
So one question you might ask is, well, hey, why, you know, great, you've end users can now touch markets themselves. They can, you know, do all this stuff. But why why is this any better than trad fi and minus prime brokers? And so, I, you know, I basically wanted the rest of the talk is basically going to go through kind of some emergent phenomena that have happened on in the ethereum world, and some extent solana now. That are very different microstructure wise than traditional finance.

So the first thing and i think is the most important thing, and this is why there's the tens of billions of dollars of liquidity and uniswap position so often, balancer and stuff is that there is this kind of liquidity network effect that is sort of reminiscent in some ways of Google. And so maybe that might sound like a crazy claim. What does this have to do with Google? Well, one really amazing thing about composability in defi is that you can compose trades between pools in a single atomic transaction. So in this example, I have four pools. Sorry, it's not super big, but you know, W BTC, to ETH, Eth to USD T, USD, T to MKR and Mkr to SOVRYN. Each of these pools have sort of has their own liquidity. liquidity providers put in their own amount that they want to earn fees.

## Tarun Chitra  {{< audioskip "9:31" >}}
But unlike in traditional finance, I can actually make an atomic transaction so in ethereum parlance, this would be a flash loan, which would basically be able to go from w BTC to sovereign by doing these three trades. So what that does is unlike in normal finance, you kind of have to rely on a prime broker or, you know, Robin Hood or interactive brokers to go execute that for you. It's not atomic, and they have to go search for the liquidity. Here, now that you have this graph of sort of the different liquidity pools, you can actually turn this into a search problem. And so now instead of executing trades, in a way where you need to actually manually go and kind of trade on one, order books, then try to find another order book, and try to find another other book, you can actually make this a graph traversal problem. And because of that, you basically are able to have way less capital locked up in all of the markets in aggregate, then each individual market to execute a certain set of trades. And so that's kind of like this very, you know, I think one of the more novel emergent behaviors that's happened, and that is sort of one of the reasons uniswap has had a moat, over its competitors, even anyone can fork it, and many have changed things is that there's kind of this, this network effective as really turning this brokerage problem of I have x and I want y but I can't trade x for y directly into this sort of graph traversal PageRank looking problem. And so at a very high level that as a network effect is something that just doesn't happen to normal finance for a couple of reasons. One, you don't add, you can't actually traverse this graph. In normal finance, you could you might have only a certain set of edges. And it might be disconnected because this portion is only traded on CME. This portion is only traded on NYSE and to go across here, you have to hold risk for a certain amount of time. And it's not an atomic transaction, it's not guaranteed to execute in a single block as a single transaction. So that that kind of atomicity guarantee is extremely important to avoiding front running and trading. It's extremely important to best execution. But it's also extremely important to I don't need that much capital to do certain trades, relatively speaking. So what one of the reasons I think this explosion has happened over the last year is really this, like, this kind of network of pools of capital can interact with each other, and the end user can choose how it happens. And they don't have to rely on a third party. And it's atomic. So, you know, I think like, that's something that, you know, is not super obvious unless you're really looking at these things and analyzing the data of how what people are trading. But at an atomocity of transactions is extremely important.

## Tarun Chitra  {{< audioskip "12:47" >}}
The second thing is is expressed livity. So one kind of very crazy thing is that when you put in liquidity into one of these, uniswap contracts. So like in a previous talk, you put in maybe two assets, like USD T and l BTC. into one pool. One question is what is your expected return what is sort of the payoff you should expect as a liquidity provider. And it turns out that you can adjust the curve the X times Y equals k to a different function, some other function of f of x and y. And by adjusting the curve, you can actually sort of replicate almost any sort of concave payoff. What that means is these pools are actually sort of like fundamental building blocks, you can you can compose them in a way to replicate things like options, payoffs, or perpetual payoffs. In a way that again, just stringing these things together in normal finance is kind of hard because they're kind of in their own little fiefdoms almost like being an AWS versus being in Google Cloud. And to do the cross chain transaction, you have to kind of like move to new ecosystems. So that expressivity means you can kind of like really, really customize your exposures.

The third thing that I think is actually quite important is contracts are immediately exchange tradable. And so the the allegory I like to use is so you know, how many of you in this room have heard of Matt Levine?

## Tarun Chitra  {{< audioskip "14:25" >}}
Okay. So Matt Levine prior to being this author that a lot of people read his mailing list for, was actually as a derivative lawyer at Goldman. And what does a derivative lawyer do? Well, from a computer science perspective, we step back a derivatives lawyer just writes decision trees. They write a bunch of decision trees that take in cash flows, do some computations on them and compute payoffs to different parties. Like oh this if this price goes below y part x gets $100. If it's greater than y party y gets $100. And these contracts are extremely non fungible, and not not in the NFT sense. But in the sense that like, there's a lawyer who has to dictate every transfer, there's no way to say like, hey, I want to own 1/10 of the value of this contract. But the cool thing is that in defi there are ways to express this calculation that people use for derivatives pricing in a in a legal contract, as a decision tree. And by using liquidity pools, you can basically sell fractions of your exposure. So right now, when you want to do something like this, you have to trust a bank to do it, you actually have no clue what the pricing is, because they are quoting you sort of indirectly. And you also can't like share the risk with anyone else. So this idea of contracts becoming exchanged tradable, again, is really, really enabled by A) automated market makers B) the ability to chain these things together. And C)  the fact that no one can really stop you from fractionalized something in some weird way that you want for trading, you know, creating a pool for a new asset.

## Tarun Chitra  {{< audioskip "16:23" >}}
And, you know, I'll give kind of a kind of an example of an atomic transaction, you can do in a theory and defy right now, that if I, when I explained to you how you do it in, you know, in traditional finance, you will see where all the transaction costs come from. So you can do the following transaction in a flash loan, probably paying like, you know, $50 of gas right now, current prices, which is I can basically take a uniswap, LP share, let's say I have Bitcoin and l BTC. And tether, that LP share. And I borrow, let's say, another asset, sovereign against it, I use my LP share as collateral. And then I take that and I put it into a lender, like a compound style lender, and I earn some interest. So what that does is it lets me say, Hey, I own some liquidity that's locked into this. And then, but I want some exposure to say, maybe increase, people shorting some other asset, so I can earn fees on that, and I borrow it and put it into this other thing. In traditional finance, the way this would work is, let's say I own virtue, shares in virtue, which is the name, which is a market making firm. That's a borrow cash against it, which means I'd have to go to a bank, the bank would have to be like, hey, you look trustworthy. Maybe I'll give you some dollars. And then you'd have to go to another bank and say, Hey, can I sell some repurchase agreements or buy some bonds, and in each step of this chain, you will have compounding transaction fees. So the first one might take 4%, the next one might take 4%. And these compounding transaction fees can really kill these types of actions in normal financial and only give access to it to like the highest capital holding providers, not the small fry. But the cool thing is, is in eth defi fi right now and solana to some extent that basically everyone gets the same pricing across it relative to your size, it's percentage based, but it's non discriminatory pricing. And I think that is kind of one of the key tenets of this, but I think especially as as Bitcoin starts building more of this stuff will be important.

## Tarun Chitra  {{< audioskip "18:48" >}}
And the final thing, and this gets back to this whole network effect thing of like, I can traverse this graph of liquidity and kind of like find sort of optimal routing, is that I can just have way better capital efficiency, I don't need to actually lock up a ton of capital into each of these things to be a market maker, I might own you know, if I want to do the previous trade, W BTC. To eth, eth-USDt,USD T- maker, maker to sovereign in a different world, I would actually have to have a ton of W BTC and sovereign to do this trade, but maybe sovereign doesn't really trade much. And so there's not that much sovereign liquidity. So I have to actually like go source it, but in a different world, you can you could imagine w BTC eth the total amount of liquidity in Bitcoin terms in this path is less than if you had a single pool if that makes sense. So, you the total network's liquidity in Bitcoin terms, is less than if you had to do any pairwise one and that was the only pool and and you wanted to be able to allow people to do any pairwise trade. So then I decided because there's kind of a way you can show that, like, you need less capital for the whole market to execute. And the last thing that I want to mention is is, you know, defi on its own, probably just way better on proof of work and proof of stake. And there are a bunch of different reasons for this. But at a very, very high level, all of these defi yield opportunities compete directly with the network security from proof of stake. Because if I'm a rational staker, and an LP pool, is giving me a higher yield, or lenders gonna be higher yield, well, why would I unstake and put it into the higher yielding asset, right? Because it really ends up being an opportunity costs. Again, in proof of work, that's much harder, because the opportunity cost kind of can only be realized with a lot of hash power derivatives. And kind of like if there was a way to not have all my capital locked into hardware that I bought, and I'm trying to amortize. So, you know, you can try to get around it, but it's actually quite hard. And I think one of the selling points of defi on Bitcoin, is that it kind of credibly won't change for proof of work.

##  Jeremy Rubin {{< audioskip "21:24" >}}
And that's, that's pretty important, because it means these opportunities can't compete with sort of the security of the underlying network. Yeah, so that's, that's what I got. A little bit about me, I guess, I used to work on ASICs, just to kind of how i got into Bitcoin. And then I worked in high frequency trading, which is how I found this stuff fascinating. Without further ado...

 we're gonna have to kind of question so maybe we'll have if people want to ask questions, line up and take the mic for a second for the recording.

##  Redacted {{< audioskip "22:18" >}}
So one question I've had about defy is how much of defy is people who are willing to make a bet, because they can get quick, cheap loans for small amounts. And it's kind of its kind, it's kind of an in addition to your second slide where you said, well, defi is, it's an ability to route through these different things. And to make it atomic, that's what's making it happen. And from, you know, from a less involved perspective, it seems to me like this is a bunch of people who can get a loan against their assets, so they're willing to make a bet. Can you can you give some kind of proportion on that? Yeah.

## Tarun Chitra  {{< audioskip "22:58" >}}
So I think one thing to think about as on centralized exchanges, people are oftentimes always getting loans against their assets, holding like a perpetual exposure, your funding rate is sort of like a loan that you're either providing or receiving as based on the bitcoin price, and contango and stuff like that. But I think a lot of the loans use right now are actually to, you know, there's certainly a bunch of it that is kind of degenerate farming. But I think there is a fraction of a large fraction of it, that is actually people who just own a bunch of Eth, or not a huge asset holder, maybe they own like, five to 10 Eth, or some amount of W BTC. And they want all their liquidity, but they don't want to KYC I would say the lack of KYC, even though obviously, you can still do chainalysis it's just harder to do the chainalysis right now is really one of the main selling points for people, instead of doing a blockfi, for instance, and I think like that, that change has been, you know, the lowered volumes and blockfi reflect that people would rather go ethereum, and mint wbtc  or something like that. But of course, you still making a tough assumption in wbtc. So yeah, that that, that there's still certainly that issue. But yeah. 

##  Redacted {{< audioskip "24:29" >}}
It seems like you were kind of stressing the point that because the liquidity pools can be composed that the total capital requirements for facilitating the same volumes of exchange is significantly, lower. The thing that immediately comes to mind is really, what are the second order consequences of having significantly less capital requirements in order to facilitate the same volume? Do you think we start doing more things or do you think that that capital gets reallocated away from what you You would describe as the financial sector into other portions of the economy?

## Tarun Chitra  {{< audioskip "25:06" >}}
Yeah, that's a great question. I think that, you know, if we think about where that capital is, right now, the equivalent capital, it's sitting at market, it's mainly market makers on the top 10 exchanges, using that capital to constantly keep quoting, and also to hedge out their risk, because market makers in a lot of ways, often are forced into this short options position, they're always selling the market, a sort of implied option, because they're saying, here's the price I'm willing to pay, here's how much I'm willing to sell for. And here's how much I'm willing and willing to bid. And you aggregate that overall market makers. So they're sort of short options, they buy a ton of options, I think the key here is that you can actually lower the leverage that market makers need to take. So there's like, certainly less kind of flash crash risk in the long run if these networks become dense enough. So I think that the lowered capital requirements, I think, yeah, if people are not don't need as much capital for that they need to go into other productive uses. And building those up is important. But yeah, I think it will just have less capital sitting on exchanges in market for market making functionality.

##  Jeremy Rubin {{< audioskip "26:26" >}}
One more question.

##  Redacted {{< audioskip "26:26" >}}
So I think it's thinking about like, the market demands that DeFi serving, right, and you said it on the very first slide, it's it's trading and leverage, right? And kind of the thing that always stood out to me looking at that, and looking at like, you know, how does Bitcoin emulate some of this stuff, which is clearly useful is to trade need other assets other than Bitcoin? and leverage, you need like a notion of onchain debt, right, which like, neither of which Bitcoin has. And so the kind of way that I've always pictured in my head, this evolving, is more, you know, Oracle's and CFDs (contracts for difference) instead. And so I'm just curious, like, if that is the way that this develops, in bitcoin instead, like, keeping, are some of these lessons useful? Or will it just look different? Know what I mean, like, like, is it if it's, if it's all CFDs, kind of like a bit Mex was where it's all bitcoin collateralized. And just Oracle's coming in? Like, will some of the same lessons apply? Because we don't, we aren't going to have like, tokens to swap, or we just have to like, as well, but we just have to build like a layer of abstraction above to get a lot of the same use cases. Does that make sense?

## Tarun Chitra  {{< audioskip "27:44" >}}
Yeah, I mean, I think in some ways, you could view lightning as providing a similar style network effect, right. Except without having time horizons. I think that that's, that's probably where you'll see something like that makes sense. The hard part is composing contracts for differences actually, like, should you take the product? So the interest rates, should you discount the interest rates? How does fee interact? And I think figuring that out, like, the cool part about constant function market makers, I think is often balancer and curve and stuff is that they give you that rule. And it's, you know, seems to have worked, right? No one has, there's billions of dollars and like, no one's known to exploit it. And it's one of the most looked at pieces of code probably in the last few years. So I think figuring out the composition rules for CFDs is probably the key thing, and maybe it won't look exactly like this, but that getting that network effect is quite important to like reducing capital needed to facilitate.

##  Redacted {{< audioskip "28:43" >}}
that seems like the hard part. Right, that all of this is hard problems. That seems like he really really hard problem that uniswap is solving; the AMM just get out of the box, right. Kind of like having to back our way into that is tough.

## Tarun Chitra  {{< audioskip "29:01" >}}
Yeah, probably

